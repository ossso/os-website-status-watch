# 阳光网站状态监控工具
----------
## 运行方法  
依赖: NodeJS V6+
```
npm install
node app
```

## 需要用户设定的内容  
1、设置express的cookie /app.js line.12  
2、设置线上运行相关内容 /system/config.js [默认的帐号admin，密码123456]  
3、设置SMTP发信配置 /system/mail.js  
4、设置短信[基于阿里大于]的配置 /system/sms.js  
4-1、短信模板参考   
```
site_name:网站名称
site_code:状态码

亲，您关注的网站：${site_name}，目前状态：${site_code}，已出现访问错误，请您及时维护您的网站。
```


## 其它说明  
1.目录解析  
```
/libs 其它的依赖库，但不是node_modules的
/public web上对外暴露的文件夹
/src 理论上前端的源代码会放这儿，目前包含sass源代码
/system 后端系统目录
/template 网站页面模板目录
/app.js 应用入口
/nginx_proxy.conf Nginx反向代理conf的demo

下面这两个文件夹是系统创建
*/data json文件模式数据库
*/logs 日志目录
```

2.运行流程  
2-1.用户添加网站;  
2-2.根据规则，执行访问任务，采用GET请求;  
2-3.网站访问出错后，会有三次继续测试，分为15秒\30秒\45秒的间隔测试，依然存在问题就会判断是否存在报警对象，存在就发信;  

3.作者的话  
3-1.这个系统仅供NodeJS娱乐，很多地方不像专业的监控那么丰富的功能；  
3-2.登录页面没加验证码，也没有直接的放入口，用户访问/login就能访问了；  
3-3.登录支持黑名单机制，如果用户连续5次错误，就会被放入黑名单，除非手动解除，否则登录和登录请求都会被禁止；  
3-4.网站信息编辑或修改后，会立即刷新；  
3-5.WEB页面支持自动刷新，会根据网站列表中最近的更新进行自动刷新；  
3-6.如果手动修改了data下内容，需要重启node才能正常读取（啊哈，忘了来一个接口去读取信息……）  
3-7.如果手动修改了Template，非开发模式需要重启node  

-----------
提示：切勿把整个项目通过nginx对外暴露，会把你的密码爆出去的……虽然爆出去以后，他也不能上传任何东西
